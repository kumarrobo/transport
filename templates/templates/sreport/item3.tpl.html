{$gtotal=0}
<table border="1" width="100%">
    <tr>
        <th>Short</th><th>Item</th><th>Quantity</th><th>Free</th><th>Amount</th>
    </tr>
    {foreach item=v key=k from=$data}
    {$total=0} 
    {foreach item=v1 key=k1 from=$v}
    <tr>
        <td>{$v1.short}</td>
        <td>{$k}</td>
        <td align="right">{$v1.qty|string_format:"%.4f"}</td>
        <td align="right">{$v1.free|string_format:"%.4f"}</td>
        <td align="right">{$v1.amount|string_format:"%.2f"}</td>
    </tr>
    {$total = $total + $v1.amount}
    {/foreach}
    {$gtotal = $gtotal + $total}
    {/foreach}
    <tr>
        <th colspan="4">Grand Total :</th><th>{$gtotal|string_format:"%.2f"}</th>
    </tr>
</table>