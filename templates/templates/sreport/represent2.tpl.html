{$gtotal=0}
{foreach item=v key=k from=$data}
Representative: <b>{$salesman[$k]}</b>
<table border="1" width="40%">
     <tr>
        <th width="100">Date</th>
        <th width="50">No of bills</th>
        <th width="50">Area</th>
        <th width="100" class="right">Goods Value</th>
        <th width="100" class="right">GST/Tax</th>
        <th width="100" class="right">Total</th>
    </tr>
    {$vattot=0}
    {$total=0}{$bill=0} 
    {foreach item=v1 key=k1 from=$v}
    <tr>
        <td>{$v1.date|date_format:$smarty_date}</td>
        <td>{$v1.bills}</td>
        <td>{$v1.aname}</td>
        <td align="right">{$v1.total-$v1.vat|string_format:"%.2f"}</td>
        <td align="right">{$v1.vat|string_format:"%.2f"}</td>
        <td align="right">{$v1.total|string_format:"%.2f"}</td>
    </tr>
    {$vattot = $vattot + $v1.vat}
    {$total = $total + $v1.total}
    {$bill = $bill + $v1.bills}
    {/foreach}
    <tr>
        <th class="right"> Total</th>
        <th align="right">{$bill|string_format:"%.0f"}</th>
        <th>&nbsp;</th>
        <th align="right">{($total-$vattot)|string_format:"%.2f"}</th>
        <th align="right">{$vattot|string_format:"%.2f"}</th>
        <th align="right">{$total|string_format:"%.2f"}</th>
    </tr>
</table>
{$gtotal = $gtotal + $total}
{/foreach}
<div style="width:39.7%; height:20px; text-align: right; font-size: 14px; border:2px solid;">
    <b><span style="margin-right: 55px;">Grand Total:</span>{$gtotal|string_format:"%.2f"}</b>
</div>
